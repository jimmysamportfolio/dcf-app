// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABSE_URL")
}

model DCF {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Page 1: Historical Data
  revenue2024   Float
  cogs2024      Float
  sgna2024      Float
  rnd2024       Float
  shareCount    Float

  // Page 2: Revenue Projections (stored as JSON arrays)
  commercialGrowthRates Json // [0.15, 0.15, 0.12, 0.10, 0.08]
  governmentGrowthRates Json // [0.10, 0.12, 0.10, 0.08, 0.08]

  // Page 3: Cost Projections (stored as JSON arrays)
  grossMargins Json // [0.60, 0.62, 0.63, 0.64, 0.65]
  rndRates     Json // [0.15, 0.14, 0.13, 0.12, 0.12]
  sgnaRates    Json // [0.20, 0.19, 0.18, 0.18, 0.17]
  taxRates     Json // [0.21, 0.21, 0.21, 0.21, 0.21]

  // Page 4: Free Cash Flow Projections (stored as JSON arrays)
  daRates    Json // [0.05, 0.05, 0.05, 0.05, 0.05]
  capexRates Json // [0.04, 0.04, 0.03, 0.03, 0.03]
  nwcRates   Json // [0.02, 0.02, 0.02, 0.01, 0.01]

  // Page 5: DCF Inputs
  wacc            Float
  perpGrowthRate  Float
  exitMultiple    Float
  cashBalance     Float
  debt            Float

  // Page 6: Calculated Results
  sharePrice        Float
  perpPrice         Float
  exitMultiplePrice Float

  // Additional calculated data (stored as JSON)
  projectedRevenues       Json // Array of 5 years
  projectedEBIT           Json // Array of 5 years
  projectedFreeCashFlows  Json // Array of 5 years
  terminalValue           Float
  terminalValueExitMultiple Float
  enterpriseValue         Float
  enterpriseValueExitMultiple Float
  equityValue             Float
  equityValueExitMultiple Float

  @@index([createdAt])
}